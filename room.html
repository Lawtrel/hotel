<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Mandacaru - Quartos Disponíveis</title>
    <link rel="stylesheet" href="style/roomStyle.css">
</head>
<body>

<header class="header">
    <img class="logo" src="img/logo.png" alt="Logotipo">
    <h1>Hotel Mandacaru - Quartos Disponíveis</h1>
</header>

<div class="room-list">
    <h2>Escolha sua Sala</h2>

    <!-- Card Sala 1 -->
    <div class="card">
        <div class="carousel">
            <img src="img/img1.jpg" alt="Imagem 1">
            <img src="img/img2.jpg" alt="Imagem 2">
            <img src="img/img3.jpg" alt="Imagem 3">
            <img src="img/img4.jpg" alt="Imagem 4">
            <img src="img/img5.jpg" alt="Imagem 5">
        </div>
        <div class="card-content">
            <h3>Sala 1</h3>
            <p>Preço: R$ 200 por noite</p>
            <p>Avaliação: ★★★★☆ (4.0)</p>
            <p>Visualizações: <span id="views1">123</span></p>
            <button onclick="checkIn('views1')">Check-in</button>
        </div>
    </div>

    <!-- Card Sala 2 -->
    <div class="card">
        <div class="carousel">
            <img src="img/img1.jpg" alt="Imagem 1">
            <img src="img/img2.jpg" alt="Imagem 2">
            <img src="img/img3.jpg" alt="Imagem 3">
            <img src="img/img4.jpg" alt="Imagem 4">
            <img src="img/img5.jpg" alt="Imagem 5">
        </div>
        <div class="card-content">
            <h3>Sala 2</h3>
            <p>Preço: R$ 250 por noite</p>
            <p>Avaliação: ★★★★☆ (4.2)</p>
            <p>Visualizações: <span id="views2">98</span></p>
            <button onclick="checkIn('views2')">Check-in</button>
        </div>
    </div>

    <!-- Card Sala 3 -->
    <div class="card">
        <div class="carousel">
            <img src="img/img1.jpg" alt="Imagem 1">
            <img src="img/img2.jpg" alt="Imagem 2">
            <img src="img/img3.jpg" alt="Imagem 3">
            <img src="img/img4.jpg" alt="Imagem 4">
            <img src="img/img5.jpg" alt="Imagem 5">
        </div>
        <div class="card-content">
            <h3>Sala 3</h3>
            <p>Preço: R$ 300 por noite</p>
            <p>Avaliação: ★★★★★ (4.8)</p>
            <p>Visualizações: <span id="views3">150</span></p>
            <button onclick="checkIn('views3')">Check-in</button>
        </div>
    </div>

    <!-- Card Sala 4 -->
    <div class="card">
        <div class="carousel">
            <img src="img/img1.jpg" alt="Imagem 1">
            <img src="img/img2.jpg" alt="Imagem 2">
            <img src="img/img3.jpg" alt="Imagem 3">
            <img src="img/img4.jpg" alt="Imagem 4">
            <img src="img/img5.jpg" alt="Imagem 5">
        </div>
        <div class="card-content">
            <h3>Sala 4</h3>
            <p>Preço: R$ 180 por noite</p>
            <p>Avaliação: ★★★★☆ (4.1)</p>
            <p>Visualizações: <span id="views4">75</span></p>
            <button onclick="checkIn('views4')">Check-in</button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const urlParams = new URLSearchParams(window.location.search);
        const checkInDate = urlParams.get('checkInDate');
        const checkOutDate = urlParams.get('checkOutDate');

        const response = await fetch(`https://127.0.0.1:5000/api/quartos-disponiveis?checkInDate=${checkInDate}&checkOutDate=${checkOutDate}`);
        const quartos = await response.json();

        const roomList = document.getElementById('room-list');
        if (quartos.length > 0) {
            quartos.forEach(quarto => {
                const roomItem = document.createElement('div');
                roomItem.innerHTML = `<h3>${quarto.nome}</h3><p>${quarto.descricao}</p><p>Preço: R$ ${quarto.preco}</p>`;
                roomList.appendChild(roomItem);
            });
        } else {
            roomList.innerHTML = '<p>Nenhum quarto disponível para as datas selecionadas.</p>';
        }
    });
/*
    // Função chamada ao clicar no botão de "Reservar"
    async function reservar(name,guests) {
        // Preparar dados para enviar para a API
        const reservationData = {
            nome: name,
            nomeSala: nomeSala,
            checkInDate: checkInDate,
            checkOutDate: checkOutDate
        };

        try {
            const response = await fetch('http://127.0.0.1:5000/api/reservar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(reservationData),
            });

            const result = await response.json();

            if (response.ok) {
                alert(Reserva realizada com sucesso! \nQuarto: ${nomeSala} \nPreço: R$ ${preco} por noite);
            } else {
                alert(Erro ao realizar a reserva: ${result.message});
            }
        } catch (error) {
            alert('Erro ao conectar com a API. Tente novamente.');
        }
    }*/
</script>

</body>
</html>
